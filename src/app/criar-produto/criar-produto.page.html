<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="primary"></ion-back-button>
    </ion-buttons>
    <ion-title>criarProduto</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form name="productForm" [formGroup]="productForm">
    <ion-grid>
      <ion-row >
        <ion-col size="auto">
          <ion-button
            (click)="takePicture()"
            fill="solid"
            shape="round"
            color="primary"
          >
            <ion-icon name="camera-outline" slot="start"></ion-icon>
            Tirar fotografia
          </ion-button>
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center">
        <ion-col size="12" class="image-container">
          <img *ngIf="imageUrl" [src]="imageUrl" alt="Captured Image" />
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-input
        label="Introduza o nome"
        label-placement="floating"
        fill="solid"
        type="text"
        placeholder="Introduza o nome"
        formControlName="Name"
        required
    ></ion-input>
    
    <ion-select
        label="Selecione a categoria do produto"
        label-placement="floating"
        fill="outline"
        formControlName="Category"
        required
      >
        <ion-select-option
          *ngFor="let categoria of categoriaList"
          [value]="categoria.text"
          >{{ categoria.text }}</ion-select-option
        >
      </ion-select>

    <ion-input
        label="Introduza o preço"
        label-placement="floating"
        fill="solid"
        type="number"
        placeholder="Introduza o preço"
        formControlName="Price"
        required
    ></ion-input>

    <ion-input
        label="Introduza o código de barras"
        label-placement="floating"
        fill="solid"
        type="text"
        placeholder="Introduza o código de barras"
        formControlName="Barcode"
        required
    ></ion-input>

    <ion-select
        label="Selecione a unidade do produto"
        label-placement="floating"
        fill="outline"
        formControlName="Unity"
        required
      >
        <ion-select-option
          *ngFor="let unidade of unidadeList"
          [value]="unidade.text"
          >{{ unidade.text }}</ion-select-option
        >
      </ion-select>

      <ion-button (click)="CriarProduto(true)">Criar Produto</ion-button>

      
  </form>

  <!-- <ion-content>
    <ion-button (click)="startScanning()" *ngIf="!isScanning">Scanear Código de Barras</ion-button>
    <ion-button (click)="stopScanning()" *ngIf="isScanning">Parar Escaneamento</ion-button>
  
    <div *ngIf="isScanning" class="scanner-container">
      <p>A câmera está ativa. Posicione o código de barras dentro da área de digitalização.</p>
    </div>
  </ion-content> -->

  <ion-content>
    <div *ngIf="!isScanning" class="ion-text-center">
      <ion-button expand="full" (click)="startScanning()">Start Scanning</ion-button>
    </div>
  
    <div *ngIf="isScanning" class="scanner-overlay">
      <div class="scanner-border"></div>
      <p class="scanner-text">Apontar para o código de barras que se encontra no produto</p>
    </div>
  </ion-content>
